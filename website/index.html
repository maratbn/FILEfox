<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
    <head>
        <style type='text/css'>
            .FILEfox_support {
                font-family:                    sans-serif;
                font-size:                      10pt;
                width:                          90%;
                margin:                         auto;
            }
            .FILEfox_support .FILEfox_quick_links {
                float:                          right;
                margin-left:                    15px;
                width:                          19%;
            }
            .FILEfox_support .FILEfox_quick_links .wooff {
                font-weight:                    bold;
            }
            .FILEfox_support .section_content {
                margin-left:                    20px;
                margin-right:                   20px;
            }
            .FILEfox_support .section_content .file_contents_container {
                background-color:               #ffff77;
                border:                         1px solid blue;
                min-height:                     50px;
                max-height:                     200px;
                overflow:                       auto;
            }
            .FILEfox_support .disclaimer {
                /*
                width:                          80%;
                */
            }
        </style>
        <title>Welcome to the FILEfox Firefox extension support website</title>
    </head>
    <body class='FILEfox_support'>
        <div class='FILEfox_quick_links'>
            <h3><a href='FILEfox.xpi'>Install FILEfox extension version 0.1</a></h3>
            <p class='wooff'>
                (Works only on <a href='http://www.getfirefox.com/'>Firefox</a>)
                <br>
            </p>
            <p>
                <h3><a href='http://github.com/maratbn/FILEfox'>Browse source</a></h3>
            </p>
        </div>
        <h1>Welcome to the FILEfox Firefox extension support website.</h1>
        <ul>
            <li class='background'>
                <h3>Background:</h3>
                <div class='section_content'>
                    <p>
                        FILEfox is an open-source <a href='http://addons.mozilla.org/'>add-on / extension module</a>
                        for the popular open-source <a href='http://www.mozilla.org/'>Mozilla</a> <a href='http://www.mozilla.com/firefox/'>Firefox</a> web browser.
                    </p>
                    <p>
                        FILEfox is a local file access proxy for JavaScript-based web applications running on Firefox.
                        It gives these applications a civilized way to request manual user permission to load specific
                        local files for local analysis, in a fashion similar to the HTML form file upload, but the
                        data does not have to be uploaded to the web server.  This eliminates the age-old requirement
                        that the user data resides on remote server(s), enabling better privacy, and further opening
                        the door to desktop computing via web applications.
                    </p>
                    <p>
                        FILEfox remains dormant until a web application requests permission to load a file.
                        The request is relayed to the user, who can approve or deny.
                        Permission can be granted to load only one file at a time, and each file is loaded only at the time the permission is granted.
                    </p>
                </div>
            </li>
            <li class='tester'>
                <h3>Test FILEfox in your browser:</h3>
                <div class='section_content'>
                    <script type='text/javascript'>
                        // <!--
                        function doLoadFile() {
                            var text_file = window.nsFILEfox.requestLoadASCIIFile("This is the FILEfox demonstration website.  Specify an ASCII text file with test data to experience the file loading process via the FILEfox extension.");
                            if (!text_file) {
                                alert("Demonstration website:  Could not get a file via the FILEfox Firefox extension.  The user has either canceled, there was an error in some part of the loading process.");
                                return;
                            }

                            var preOutput = document.getElementById('output');
                            preOutput.innerHTML = "";

                            var spanStatus = document.getElementById('status');
                            spanStatus.innerHTML = "";

                            var i = 0;

                            (function() {
                                for (var j = 0; j < 1000 && i < text_file.totalLines; i++, j++) {
                                    preOutput.appendChild(document.createTextNode(text_file.getLine(i)));
                                }
                                spanStatus.innerHTML = "Rendered " + i + " lines out of " + text_file.totalLines + "  " + ((i / text_file.totalLines) * 100).toFixed(2) + "%" + (i == text_file.totalLines && "  load complete" || "");
                                if (i < text_file.totalLines) {
                                    setTimeout(arguments.callee, 100);
                                }
                            })();
                        }
                        if (window.nsFILEfox) {
                            document.writeln("<p>");
                            document.writeln("You have the FILEfox extension version ", window.nsFILEfox.getVersion(), " installed and enabled.");
                            document.writeln("</p>");
                            document.writeln("<p>");
                            document.writeln("You can <a href='#' onClick='doLoadFile()'>test-load</a> an ASCII text file off your hard drive into the area below:");
                            document.writeln("</p>");
                            document.writeln("<p>");
                            document.writeln("<span id='status'></span>");
                            document.writeln("</p>");
                            document.writeln("<pre id='output' class='file_contents_container'></pre>");
                            document.writeln("<br>");
                        } else {
                            if (navigator && navigator.userAgent.match(/Firefox/)) {
                                document.writeln("You do NOT currently have the FILEfox extension installed, or it is explicitly disabled.");
                            } else {
                                document.writeln("This feature is currently not supported on the browser you are using to view this page.");
                            }
                        }
                        
                        // -->
                    </script>
                </div>
            </li>
            <li class='documentation'>
                <h3>FILEfox API Documentation:</h3>
                <div class='section_content'>
                    <p>
                        The FILEfox extension makes itself available to every website loaded in the browser DOM via the global 'nsFILEfox' object.
                        The 'nsFILEfox' is an XPCOM component conforming to the XPCOM interface 'nsIFILEfox'.
                        <p>
                            Methods:
                            <ul>
                                <li>
                                    <h5>String getVersion()</h5>
                                    <p>
                                        Returns the version of the currently installed FILEfox extension.
                                    </p>
                                </li>
                                <li><h5>nsIFILEfoxTextFileRead requestLoadASCIIFile(String strMessageToUser)</h5>
                                    <p>
                                        Causes the FILEfox extension to request from the user to manually select an ASCII text file to load.  The
                                        function will then initiate a synchroneous file loading process, and at the conclusion return an object
                                        corresponding to the 'nsIFILEfoxTextFileRead' contract with the file contents, or a falsy value on failure.
                                        <p>
                                            Parameters:
                                            <ul>
                                                <li>
                                                    <h6>String strMessageToUser</h6>
                                                    <p>
                                                        A textual request message to display to the user, possibly explaining why
                                                        the application is requesting an ASCII text file.
                                                    </p>
                                                </li>
                                            </ul>
                                        </p>
                                    </p>
                                </li>
                            </ul>
                        </p>
                    </p>
                    <p>
                        The anonymous 'nsIFILEfoxTextFileRead' object returned by the method
                        'nsFILEfox.requestLoadASCIIFile(...)' contains the contents of the text file loaded.
                        <p>
                            Properties:
                            <ul>
                                <li>
                                    <h5>String encoding</h5>
                                    <p>
                                        The encoding with which this text file is encoded.
                                    </p>
                                </li>
                                <li>
                                    <h5>Number totalLines</h5>
                                    <p>
                                        Total number of lines in the text file.
                                    </p>
                                    <p>
                                        The text file is stored line by line rather than in a single string, as otherwise a huge file in a huge string 
                                        would overwhelm the browser's JavaScript engine.
                                    </p>
                                </li>
                                <li>
                                    <h5>Number totalChars</h5>
                                    <p>
                                        Total number of characters in the text file.
                                    </p>
                                </li>
                            </ul>
                            Methods:
                            <ul>
                                <li>
                                    <h5>String getLine(Number indexLine)</h5>
                                    <p>
                                        Returns a single line out of the text file, including the line termination carriage return character sequence.
                                        <p>
                                            Parameters:
                                            <ul>
                                                <li>
                                                    <h6>Number indexLine</h6>
                                                    <p>
                                                        0-based index of the line.
                                                    </p>
                                                </li>
                                            </ul>
                                        </p>
                                    </p>
                                </li>
                            </ul>
                        </p>
                    </p>
                </div>
            </li>
            <li class='disclaimer'>
                <h3>Disclaimer:</h3>
                <div class='section_content'>
                    <p>
                        WARNING:  MALICIOUS WEB APPLICATIONS MAY UPLOAD ANY DATA AVAILABLE TO MALICIOUS SERVERS.
                        <ul>
                            <li>USE THIS EXTENSION ONLY WITH THE WEBSITES YOU TRUST.</li>
                            <li>DO NOT USE THIS EXTENSION TO OPEN FILES FOR PHISHING WEBSITES.</li>
                            <li>DO NOT USE THIS EXTENSION TO OPEN FILES FOR WEBSITES THAT ALLOW ARBITRARY 3-RD PARTY JAVASCRIPT APPLICATIONS (SUCH AS FACEBOOK).</li>
                            <li>DO NOT USE THIS EXTENSION TO OPEN FILES CONTAINING DATA SUCH AS AUTHENTICATION, OPERATING SYSTEM CONFIGURATION, OR FINANCIAL INFORMATION.</li>
                        </ul>
                    </p>
                    
                    <p>
                        ** RECOMMENDED FOR EXPERIENCED USERS ONLY **
                    </p>
                </div>
            </li>
        </ul>
        <div class='footer'>
            Copyright (c) 2010 Marat Nepomnyashy
            <br>
            Except where otherwise noted, this webpage is licensed under the
            <a href='http://creativecommons.org/licenses/by-sa/3.0/'>Creative Commons Attribution Share-Alike License version 3</a>.
        </div>
    </body>
</html>